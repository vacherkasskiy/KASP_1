# Касперский. Тестовое задание 1 (усложненная версия)

## Условие

Требуется реализовать два приложения, используя .NET Core / .NET:

Сервисное приложение, реализующее простой REST API, который предоставляет ресурс для создания задач на получение ревьюеров для переданного пути и получения статуса задачи по идентификатору
утилиту, работающую из командной строки, отправляющую сервисному приложению команды на создание и просмотр состояния задач.
 
После завершения команды на получение ревьюеров должен быть выведен уникальный идентификатор задачи.
После завершения команды просмотра статуса задачи может быть выведено два результата:
- статус "задача еще выполняется"
- отчет о ревьюерах
 

Пример исполнения утилиты из командной строки:

```
reviewer_util reviewers.yaml folder1/readme.md
```

> Task created with ID: 111

```
reviewer_util status 111
```

> Task 111 in progress

```
reviewer_util status 111
```

> path: folder1/readme.md  
> reviewers: user1; user2; user3

Примечание:
- Cервисное приложение не имеет постоянного хранилища состояния (каждый запуск как чистый лист)
- Cервисное приложение и утилита работают на одном и том же устройстве
- Pекомендуется максимальное использования (утилизация) вычислительных ресурсов устройства, на котором выполняется утилита.

## Руководство по использованию

Шаги для запуска программы
- Клонировать репозиторий себе на ПК
- Открыть решение в `IDE`, поддерживающий язык `C#`
- Установить в конфигурациях запуска `Environment variables: ASPNETCORE_URLS=https://localhost:7107;http://localhost:5152 ASPNETCORE_ENVIRONMENT=Development`)
- Запустить проект `KASP_1_API`
- В консоли ввести `cd output`
- Вводить комманды в консоль

Команды могут быть двух типов:
- .\reviewer_util.exe add <путь к yaml файлу относительно папки с решением> <путь к файлу для нахождения ревьюверов>
- .\reviewer_util.exe status <id задачи>

Пример:
```
.\reviewer_util.exe add reviewers.yaml folder1/readme.md
.\reviewer_util.exe status 1
```

Пример yaml файла:
```
rules:
  default_rule:
    included_paths:
      - folder1/*
    reviewers:
      - user1
      - user2

  additional_rule:
    included_paths:
      - folder1/*.md
    reviewers:
      - user3
```

## Примечания:

- Программа также может быть запущена из любой директории при добавлении в `PATH` пути к папке `output`
- При невозможности изменения порта `localhost` в конфигурациях запуска, необходимо проделать следующее:
  - Изменить в файле `KASP_1_Console` значение переменной `baseUrl` на своё
  - Из корневой папки проекта в консоли вызвать команду `dotnet publish ./KASP_1_Console/KASP_1_Console.csproj -c Release -o ./output`
  - Переименовать файл `KASP_1/output/KASP_1_Console.exe` в `reviewer_util.exe`
  - Продолжить выполнение шагов для запуска программы с соответствующей позиции (4)
